================================================================================
complex if
================================================================================

# PRG implies no asserts.
%if defined (PRG)
    %if defined (DEBUG)
        %error Cannot define PRG and DEBUG.
    %endif
    %if !defined(NDEBUG) && !defined(PRG_NO_NDEBUG)
        always:
            |Setting NDEBUG=1 because PRG was set.
        
        NDEBUG = 1
    %endif
%endif

--------------------------------------------------------------------------------

(source_file
  (comment)
  (if
    (define)
    (body
      (if
        (define)
        (body
          (diagnostic
            (restOfLine))))
      (if
        (define)
        (define)
        (body
          (rule
            (always)
            (build_command
              (command_mod
                (silent_echo))
              (command
                (restOfLine))))
          (assign
            (identifier)
            (restOfLine)))))))
